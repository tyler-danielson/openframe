import type { Calendar, CalendarEvent, Task, TaskList, User, NewsHeadline } from "@openframe/shared";
import type { WeatherData, WeatherForecast, HourlyForecast } from "../services/api";
import { addDays, addHours, setHours, setMinutes, startOfDay } from "date-fns";

// --- Calendars ---

export const DEMO_CALENDARS: Calendar[] = [
  {
    id: "demo-personal",
    provider: "google",
    externalId: "demo-personal",
    name: "Personal",
    description: null,
    color: "#3B82F6",
    icon: null,
    isVisible: true,
    isPrimary: true,
    isFavorite: false,
    isReadOnly: false,
    syncEnabled: true,
    showOnDashboard: true,
    lastSyncAt: new Date(),
    visibility: { week: true, month: true, day: true, popup: true, screensaver: false },
  },
  {
    id: "demo-work",
    provider: "google",
    externalId: "demo-work",
    name: "Work",
    description: null,
    color: "#10B981",
    icon: null,
    isVisible: true,
    isPrimary: false,
    isFavorite: false,
    isReadOnly: false,
    syncEnabled: true,
    showOnDashboard: true,
    lastSyncAt: new Date(),
    visibility: { week: true, month: true, day: true, popup: true, screensaver: false },
  },
  {
    id: "demo-family",
    provider: "google",
    externalId: "demo-family",
    name: "Family",
    description: null,
    color: "#F59E0B",
    icon: null,
    isVisible: true,
    isPrimary: false,
    isFavorite: false,
    isReadOnly: false,
    syncEnabled: true,
    showOnDashboard: true,
    lastSyncAt: new Date(),
    visibility: { week: true, month: true, day: true, popup: true, screensaver: false },
  },
];

// --- Events (generated relative to today) ---

export function generateDemoEvents(): CalendarEvent[] {
  const today = startOfDay(new Date());

  return [
    // Today events
    {
      id: "demo-evt-1",
      calendarId: "demo-personal",
      externalId: "demo-evt-1",
      title: "Morning Run",
      description: "5K around the park",
      location: "City Park",
      startTime: setMinutes(setHours(today, 7), 0),
      endTime: setMinutes(setHours(today, 8), 0),
      isAllDay: false,
      status: "confirmed",
      recurrenceRule: null,
      recurringEventId: null,
      attendees: [],
      reminders: [],
    },
    {
      id: "demo-evt-2",
      calendarId: "demo-work",
      externalId: "demo-evt-2",
      title: "Team Standup",
      description: "Daily sync with engineering team",
      location: null,
      startTime: setMinutes(setHours(today, 9), 30),
      endTime: setMinutes(setHours(today, 10), 0),
      isAllDay: false,
      status: "confirmed",
      recurrenceRule: null,
      recurringEventId: null,
      attendees: [],
      reminders: [],
    },
    {
      id: "demo-evt-3",
      calendarId: "demo-work",
      externalId: "demo-evt-3",
      title: "Product Review",
      description: "Q1 feature review with stakeholders",
      location: "Conference Room B",
      startTime: setMinutes(setHours(today, 14), 0),
      endTime: setMinutes(setHours(today, 15), 30),
      isAllDay: false,
      status: "confirmed",
      recurrenceRule: null,
      recurringEventId: null,
      attendees: [],
      reminders: [],
    },
    {
      id: "demo-evt-4",
      calendarId: "demo-family",
      externalId: "demo-evt-4",
      title: "Grocery Shopping",
      description: null,
      location: "Whole Foods",
      startTime: setMinutes(setHours(today, 17), 30),
      endTime: setMinutes(setHours(today, 18), 30),
      isAllDay: false,
      status: "confirmed",
      recurrenceRule: null,
      recurringEventId: null,
      attendees: [],
      reminders: [],
    },
    // Tomorrow events
    {
      id: "demo-evt-5",
      calendarId: "demo-personal",
      externalId: "demo-evt-5",
      title: "Dentist Appointment",
      description: "Regular checkup",
      location: "Downtown Dental",
      startTime: setMinutes(setHours(addDays(today, 1), 10), 0),
      endTime: setMinutes(setHours(addDays(today, 1), 11), 0),
      isAllDay: false,
      status: "confirmed",
      recurrenceRule: null,
      recurringEventId: null,
      attendees: [],
      reminders: [],
    },
    {
      id: "demo-evt-6",
      calendarId: "demo-work",
      externalId: "demo-evt-6",
      title: "Sprint Planning",
      description: "Plan next sprint backlog",
      location: null,
      startTime: setMinutes(setHours(addDays(today, 1), 13), 0),
      endTime: setMinutes(setHours(addDays(today, 1), 14), 30),
      isAllDay: false,
      status: "confirmed",
      recurrenceRule: null,
      recurringEventId: null,
      attendees: [],
      reminders: [],
    },
    // Day after tomorrow - all day event
    {
      id: "demo-evt-7",
      calendarId: "demo-family",
      externalId: "demo-evt-7",
      title: "Family Day Out",
      description: "Zoo trip with the kids",
      location: "City Zoo",
      startTime: addDays(today, 2),
      endTime: addDays(today, 2),
      isAllDay: true,
      status: "confirmed",
      recurrenceRule: null,
      recurringEventId: null,
      attendees: [],
      reminders: [],
    },
    // +3 days
    {
      id: "demo-evt-8",
      calendarId: "demo-work",
      externalId: "demo-evt-8",
      title: "Design Workshop",
      description: "UX redesign brainstorming",
      location: "Design Lab",
      startTime: setMinutes(setHours(addDays(today, 3), 11), 0),
      endTime: setMinutes(setHours(addDays(today, 3), 13), 0),
      isAllDay: false,
      status: "confirmed",
      recurrenceRule: null,
      recurringEventId: null,
      attendees: [],
      reminders: [],
    },
    // +4 days
    {
      id: "demo-evt-9",
      calendarId: "demo-personal",
      externalId: "demo-evt-9",
      title: "Yoga Class",
      description: null,
      location: "Community Center",
      startTime: setMinutes(setHours(addDays(today, 4), 18), 0),
      endTime: setMinutes(setHours(addDays(today, 4), 19), 0),
      isAllDay: false,
      status: "confirmed",
      recurrenceRule: null,
      recurringEventId: null,
      attendees: [],
      reminders: [],
    },
    // +5 days - all day
    {
      id: "demo-evt-10",
      calendarId: "demo-family",
      externalId: "demo-evt-10",
      title: "Birthday Party",
      description: "Emma's 7th birthday celebration",
      location: "123 Maple St",
      startTime: addDays(today, 5),
      endTime: addDays(today, 5),
      isAllDay: true,
      status: "confirmed",
      recurrenceRule: null,
      recurringEventId: null,
      attendees: [],
      reminders: [],
    },
  ];
}

// --- Task Lists & Tasks ---

export const DEMO_TASK_LISTS: TaskList[] = [
  { id: "demo-list-1", name: "Personal", isVisible: true },
  { id: "demo-list-2", name: "Work", isVisible: true },
];

const today = startOfDay(new Date());

export const DEMO_TASKS: Task[] = [
  {
    id: "demo-task-1",
    taskListId: "demo-list-1",
    title: "Pick up dry cleaning",
    notes: null,
    status: "needsAction",
    dueDate: today,
    completedAt: null,
  },
  {
    id: "demo-task-2",
    taskListId: "demo-list-1",
    title: "Schedule car maintenance",
    notes: "Oil change + tire rotation",
    status: "needsAction",
    dueDate: addDays(today, 1),
    completedAt: null,
  },
  {
    id: "demo-task-3",
    taskListId: "demo-list-1",
    title: "Buy birthday gift for Emma",
    notes: null,
    status: "needsAction",
    dueDate: addDays(today, 4),
    completedAt: null,
  },
  {
    id: "demo-task-4",
    taskListId: "demo-list-1",
    title: "Renew gym membership",
    notes: null,
    status: "needsAction",
    dueDate: null,
    completedAt: null,
  },
  {
    id: "demo-task-5",
    taskListId: "demo-list-2",
    title: "Review PR #42",
    notes: "Auth refactor changes",
    status: "needsAction",
    dueDate: today,
    completedAt: null,
  },
  {
    id: "demo-task-6",
    taskListId: "demo-list-2",
    title: "Update project documentation",
    notes: null,
    status: "needsAction",
    dueDate: addDays(today, 2),
    completedAt: null,
  },
  {
    id: "demo-task-7",
    taskListId: "demo-list-2",
    title: "Prepare sprint demo",
    notes: "Include new dashboard features",
    status: "needsAction",
    dueDate: addDays(today, 3),
    completedAt: null,
  },
  {
    id: "demo-task-8",
    taskListId: "demo-list-2",
    title: "Set up staging environment",
    notes: null,
    status: "needsAction",
    dueDate: null,
    completedAt: null,
  },
];

// --- Weather ---

export const DEMO_WEATHER: WeatherData = {
  temp: 72,
  feels_like: 70,
  temp_min: 62,
  temp_max: 78,
  humidity: 55,
  description: "partly cloudy",
  icon: "02d",
  wind_speed: 8,
  city: "San Francisco",
  units: "imperial",
};

export const DEMO_HOURLY: HourlyForecast[] = [
  { time: "9 AM", temp: 65, description: "sunny", icon: "01d", humidity: 60, wind_speed: 5, pop: 0, units: "imperial" },
  { time: "10 AM", temp: 68, description: "sunny", icon: "01d", humidity: 55, wind_speed: 6, pop: 0, units: "imperial" },
  { time: "11 AM", temp: 70, description: "partly cloudy", icon: "02d", humidity: 52, wind_speed: 7, pop: 5, units: "imperial" },
  { time: "12 PM", temp: 72, description: "partly cloudy", icon: "02d", humidity: 50, wind_speed: 8, pop: 10, units: "imperial" },
  { time: "1 PM", temp: 74, description: "partly cloudy", icon: "02d", humidity: 48, wind_speed: 9, pop: 10, units: "imperial" },
  { time: "2 PM", temp: 76, description: "sunny", icon: "01d", humidity: 45, wind_speed: 8, pop: 5, units: "imperial" },
  { time: "3 PM", temp: 78, description: "sunny", icon: "01d", humidity: 43, wind_speed: 7, pop: 0, units: "imperial" },
  { time: "4 PM", temp: 76, description: "partly cloudy", icon: "02d", humidity: 48, wind_speed: 6, pop: 5, units: "imperial" },
];

export const DEMO_FORECAST: WeatherForecast[] = [
  { date: "Mon", temp_min: 58, temp_max: 75, description: "sunny", icon: "01d", units: "imperial" },
  { date: "Tue", temp_min: 60, temp_max: 78, description: "partly cloudy", icon: "02d", units: "imperial" },
  { date: "Wed", temp_min: 55, temp_max: 70, description: "cloudy", icon: "03d", units: "imperial" },
  { date: "Thu", temp_min: 52, temp_max: 65, description: "light rain", icon: "10d", units: "imperial" },
  { date: "Fri", temp_min: 56, temp_max: 72, description: "sunny", icon: "01d", units: "imperial" },
];

// --- News ---

export const DEMO_HEADLINES: NewsHeadline[] = [
  {
    id: "demo-news-1",
    title: "NASA Announces New Mars Mission Timeline",
    link: "#",
    imageUrl: null,
    publishedAt: new Date(),
    feedName: "Science Daily",
    feedCategory: "science",
  },
  {
    id: "demo-news-2",
    title: "Tech Industry Sees Record Growth in Renewable Energy Investment",
    link: "#",
    imageUrl: null,
    publishedAt: new Date(),
    feedName: "Reuters",
    feedCategory: "technology",
  },
  {
    id: "demo-news-3",
    title: "Local Community Garden Project Wins National Award",
    link: "#",
    imageUrl: null,
    publishedAt: addHours(new Date(), -2),
    feedName: "Local News",
    feedCategory: "local",
  },
  {
    id: "demo-news-4",
    title: "New Study Links Mediterranean Diet to Improved Brain Health",
    link: "#",
    imageUrl: null,
    publishedAt: addHours(new Date(), -4),
    feedName: "Health Today",
    feedCategory: "health",
  },
  {
    id: "demo-news-5",
    title: "Global Markets Rally on Positive Economic Data",
    link: "#",
    imageUrl: null,
    publishedAt: addHours(new Date(), -5),
    feedName: "Financial Times",
    feedCategory: "business",
  },
  {
    id: "demo-news-6",
    title: "Summer Film Season Preview: Top 10 Most Anticipated Releases",
    link: "#",
    imageUrl: null,
    publishedAt: addHours(new Date(), -8),
    feedName: "Entertainment Weekly",
    feedCategory: "entertainment",
  },
];

// --- User ---

export const DEMO_USER: User = {
  id: "demo-user",
  email: "demo@openframe.us",
  name: "Demo User",
  avatarUrl: null,
  role: "member",
  timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
  preferences: {},
  createdAt: new Date(),
  updatedAt: new Date(),
};
